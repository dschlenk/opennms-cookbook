<scriptd-configuration xmlns="http://xmlns.opennms.org/xsd/config/scriptd">
  <% @config.engine.each do |e| -%>
    <engine
      language="<%= e.language.to_s.encode(xml: :attr) %>"
      <%= e.class_name ? "class_name=\"#{e.class_name.to_s.encode(xml: :attr)}\"" : '' %>
      <%= e.extensions ? "extensions=\"#{e.extensions.to_s.gsub(/["']/, '').encode(xml: :attr)}\"" : '' %> />
  <% end -%>

  <% @config.start_script.each do |ss| -%>
    <start-script language="<%= ss.language.to_s.encode(xml: :attr) %>">
      <%= ss.script.to_s.encode(xml: :text) %>
    </start-script>
  <% end -%>

  <% @config.stop_script.each do |s| -%>
    <stop-script language="<%= s.language.to_s.encode(xml: :attr) %>">
      <%= s.script.to_s.encode(xml: :text) %>
    </stop-script>
  <% end -%>

  <% @config.reload_script.each do |rs| -%>
    <reload-script language="<%= rs.language.to_s.encode(xml: :attr) %>">
      <%= rs.script.to_s.encode(xml: :text) %>
    </reload-script>
  <% end -%>

  <% @config.event_script.each do |es| -%>
    <event-script language="<%= es.language.to_s.encode(xml: :attr) %>">
      <%= es.script.to_s.encode(xml: :text) %>
    </event-script>
    <% Array(es.uei).each do |uei_value| -%>
      <uei name="<%= uei_value.to_s.encode(xml: :attr) %>" />
    <% end -%>
  <% end -%>
</scriptd-configuration>
