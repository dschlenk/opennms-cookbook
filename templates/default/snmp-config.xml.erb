<snmp-config xmlns="http://xmlns.opennms.org/xsd/config/snmp" <%= @snmp_config.version.nil? ? '' : "version=\"#{@snmp_config.version}\"" %><%= @snmp_config.port.nil? ? '' : " port=\"#{@snmp_config.port}\"" %><%= @snmp_config.read_community.nil? ? '' : " read-community=#{@snmp_config.read_community.encode(:xml => :attr)}" %><%= @snmp_config.write_community.nil? ? '' : " write-community=#{@snmp_config.write_community.encode(:xml => :attr)}" %><%= @snmp_config.timeout.nil? ? '' : " timeout=\"#{@snmp_config.timeout}\"" %><%= @snmp_config.retry_count.nil? ? '' : " retry=\"#{@snmp_config.retry_count}\"" %><%= @snmp_config.proxy_host.nil? ? '' : " proxy-host=#{@snmp_config.proxy_host.encode(:xml => :attr)}" %><%= @snmp_config.max_vars_per_pdu.nil? ? '' : " max-vars-per-pdu=\"#{@snmp_config.max_vars_per_pdu}\"" %><%= @snmp_config.max_repetitions.nil? ? '' : " max-repetitions=\"#{@snmp_config.max_repetitions}\"" %><%= @snmp_config.max_request_size.nil? ? '' : " max-request-size=\"#{@snmp_config.max_request_size}\"" %><%= @snmp_config.ttl.nil? ? '' : " ttl=\"#{@snmp_config.ttl}\"" %><%= @snmp_config.encrypted.nil? ? '' : " encrypted=\"#{@snmp_config.encrypted}\"" %><%= @snmp_config.security_name.nil? ? '' : " security-name=#{@snmp_config.security_name.encode(:xml => :attr)}" %><%= @snmp_config.security_level.nil? ? '' : " security-level=\"#{@snmp_config.security_level}\"" %><%= @snmp_config.auth_passphrase.nil? ? '' : " auth-passphrase=#{@snmp_config.auth_passphrase.encode(:xml => :attr)}" %><%= @snmp_config.auth_protocol.nil? ? '' : " auth-protocol=\"#{@snmp_config.auth_protocol}\"" %><%= @snmp_config.engine_id.nil? ? '' : " engine-id=#{@snmp_config.engine_id.encode(:xml => :attr)}" %><%= @snmp_config.context_engine_id.nil? ? '' : " context-engine-id=#{@snmp_config.context_engine_id.encode(:xml => :attr)}" %><%= @snmp_config.context_name.nil? ? '' : " context-name=#{@snmp_config.context_name.encode(:xml => :attr)}" %><%= @snmp_config.privacy_passphrase.nil? ? '' : " privacy-passphrase=#{@snmp_config.privacy_passphrase.encode(:xml => :attr)}" %><%= @snmp_config.privacy_protocol.nil? ? '' : " privacy-protocol=\"#{@snmp_config.privacy_protocol}\"" %><%= @snmp_config.enterprise_id.nil? ? '' : " enterprise-id=#{@snmp_config.enterprise_id.encode(:xml => :attr)}" %><%= (@snmp_config.definitions.length == 0) && (@snmp_config.profiles.length == 0) ? '/>' : '>' %>
  <% @snmp_config.definitions.each do |definition| -%>
   <definition<%= definition.version.nil? ? '' : " version=\"#{definition.version}\"" %><%= definition.port.nil? ? '' : " port=\"#{definition.port}\"" %><%= definition.read_community.nil? ? '' : " read-community=#{definition.read_community.encode(:xml => :attr)}" %><%= definition.write_community.nil? ? '' : " write-community=#{definition.write_community.encode(:xml => :attr)}" %><%= definition.timeout.nil? ? '' : " timeout=\"#{definition.timeout}\"" %><%= definition.retry_count.nil? ? '' : " retry=\"#{definition.retry_count}\"" %><%= definition.proxy_host.nil? ? '' : " proxy-host=#{definition.proxy_host.encode(:xml => :attr)}" %><%= definition.max_vars_per_pdu.nil? ? '' : " max-vars-per-pdu=\"#{definition.max_vars_per_pdu}\"" %><%= definition.max_repetitions.nil? ? '' : " max-repetitions=\"#{definition.max_repetitions}\"" %><%= definition.max_request_size.nil? ? '' : " max-request-size=\"#{definition.max_request_size}\"" %><%= definition.ttl.nil? ? '' : " ttl=\"#{definition.ttl}\"" %><%= definition.encrypted.nil? ? '' : " encrypted=\"#{definition.encrypted}\"" %><%= definition.security_name.nil? ? '' : " security-name=#{definition.security_name.encode(:xml => :attr)}" %><%= definition.security_level.nil? ? '' : " security-level=\"#{definition.security_level}\"" %><%= definition.auth_passphrase.nil? ? '' : " auth-passphrase=#{definition.auth_passphrase.encode(:xml => :attr)}" %><%= definition.auth_protocol.nil? ? '' : " auth-protocol=\"#{definition.auth_protocol}\"" %><%= definition.engine_id.nil? ? '' : " engine-id=#{definition.engine_id.encode(:xml => :attr)}" %><%= definition.context_engine_id.nil? ? '' : " context-engine-id=#{definition.context_engine_id.encode(:xml => :attr)}" %><%= definition.context_name.nil? ? '' : " context-name=#{definition.context_name.encode(:xml => :attr)}" %><%= definition.privacy_passphrase.nil? ? '' : " privacy-passphrase=#{definition.privacy_passphrase.encode(:xml => :attr)}" %><%= definition.privacy_protocol.nil? ? '' : " privacy-protocol=\"#{definition.privacy_protocol}\"" %><%= definition.enterprise_id.nil? ? '' : " enterprise-id=#{definition.enterprise_id.encode(:xml => :attr)}" %><%= definition.location.nil? ? '' : " location=#{definition.location.encode(:xml => :attr)}" %><%= definition.profile_label.nil? ? '' : " profile-label=#{definition.profile_label.encode(:xml => :attr)}" %>>
     <% if !definition.ranges.nil? && definition.ranges.is_a?(Array) -%>
       <% definition.ranges.each do |r| -%>
         <% r.each do |b,e| -%>
       <range begin=<%= b.to_s.encode(:xml => :attr) %> end=<%= e.to_s.encode(:xml => :attr) %> />
         <% end if r.is_a?(Hash) -%>
       <% end -%>
     <% end -%>
     <% if !definition.specifics.nil? && definition.specifics.is_a?(Array) -%>
       <% definition.specifics.each do |specific| -%>
       <specific><%= specific.to_s.encode(:xml => :text) %></specific>
       <% end -%>
     <% end -%>
     <% if !definition.ip_matches.nil? && definition.ip_matches.is_a?(Array) -%>
       <% definition.ip_matches.each do |ip_match| -%>
       <ip-match><%= ip_match.to_s.encode(:xml => :text) %></ip-match>
       <% end -%>
     <% end -%>
   </definition>
  <% end -%>
<% if @snmp_config.profiles.length > 0 -%>
   <profiles>
  <% @snmp_config.profiles.each do |profile| -%>
       <profile<%= profile.version.nil? ? '' : " version=\"#{profile.version}\"" %><%= profile.port.nil? ? '' : " port=\"#{profile.port}\"" %><%= profile.read_community.nil? ? '' : " read-community=#{profile.read_community.encode(:xml => :attr)}" %><%= profile.write_community.nil? ? '' : " write-community=#{profile.write_community.encode(:xml => :attr)}" %><%= profile.timeout.nil? ? '' : " timeout=\"#{profile.timeout}\"" %><%= profile.retry_count.nil? ? '' : " retry=\"#{profile.retry_count}\"" %><%= profile.proxy_host.nil? ? '' : " proxy-host=#{profile.proxy_host.encode(:xml => :attr)}" %><%= profile.max_vars_per_pdu.nil? ? '' : " max-vars-per-pdu=\"#{profile.max_vars_per_pdu}\"" %><%= profile.max_repetitions.nil? ? '' : " max-repetitions=\"#{profile.max_repetitions}\"" %><%= profile.max_request_size.nil? ? '' : " max-request-size=\"#{profile.max_request_size}\"" %><%= profile.ttl.nil? ? '' : " ttl=\"#{profile.ttl}\"" %><%= profile.encrypted.nil? ? '' : " encrypted=\"#{profile.encrypted}\"" %><%= profile.security_name.nil? ? '' : " security-name=#{profile.security_name.encode(:xml => :attr)}" %><%= profile.security_level.nil? ? '' : " security-level=\"#{profile.security_level}\"" %><%= profile.auth_passphrase.nil? ? '' : " auth-passphrase=#{profile.auth_passphrase.encode(:xml => :attr)}" %><%= profile.auth_protocol.nil? ? '' : " auth-protocol=\"#{profile.auth_protocol}\"" %><%= profile.engine_id.nil? ? '' : " engine-id=#{profile.engine_id.encode(:xml => :attr)}" %><%= profile.context_engine_id.nil? ? '' : " context-engine-id=#{profile.context_engine_id.encode(:xml => :attr)}" %><%= profile.context_name.nil? ? '' : " context-name=#{profile.context_name.encode(:xml => :attr)}" %><%= profile.privacy_passphrase.nil? ? '' : " privacy-passphrase=#{profile.privacy_passphrase.encode(:xml => :attr)}" %><%= profile.privacy_protocol.nil? ? '' : " privacy-protocol=\"#{profile.privacy_protocol}\"" %><%= profile.enterprise_id.nil? ? '' : " enterprise-id=#{profile.enterprise_id.encode(:xml => :attr)}" %>>
         <label><%= profile.label.to_s.encode(:xml => :text) %></label><%= profile.filter.nil? ? '' : "\n         <filter>#{profile.filter.to_s.encode(:xml => :text)}</filter>" %>
      </profile>
  <% end -%>
   </profiles>
<% end -%>
<% if @snmp_config.definitions.length > 0 || @snmp_config.profiles.length > 0 -%>
</snmp-config>
<% end -%>
